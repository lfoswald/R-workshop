<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>R-Primer 1</title>

<script src="1-basics_files/header-attrs-2.9/header-attrs.js"></script>
<script src="1-basics_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="1-basics_files/bootstrap-3.3.5/css/lumen.min.css" rel="stylesheet" />
<script src="1-basics_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="1-basics_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="1-basics_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="1-basics_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="1-basics_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="1-basics_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="1-basics_files/navigation-1.1/tabsets.js"></script>
<link href="1-basics_files/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="1-basics_files/pagedtable-1.1/js/pagedtable.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div id="header">



<h1 class="title toc-ignore">R-Primer 1</h1>
<h3 class="subtitle">Getting you up to speed with R</h3>

</div>


<div id="welcome" class="section level2">
<h2>Welcome! 👋</h2>
<p>The practical component of the <strong>Statistical Modeling &amp; Causal Inference</strong> course relies largely on <em>R</em> programming. Today will center around some of the necessary skills to perform the assignments for this course.</p>
<p>This week’s primer will be divided in two parts. Today, we will focus on three aspects:</p>
<ul>
<li>First, we will speak about the R and RStudio infrastructure setup.</li>
<li>Second, we will remind you of the most important data structures in R and we will practice some basic commands to get you up to speed with working in R.</li>
<li>Third, we will discuss some best practices in R.</li>
</ul>
<p>But first things first: <strong>Have you all successfully installed R and RStudio?</strong> Otherwise, <a href="https://cran.r-project.org/">install R</a> first, then <a href="https://www.rstudio.com/products/rstudio/">install RStudio</a> - or think about <a href="https://happygitwithr.com/install-r-rstudio.html">updating</a> R, RStudio, and your installed packages.</p>
<hr />
</div>
<div id="r-and-rstudio-basics" class="section level1">
<h1>R and RStudio: Basics</h1>
<div id="the-rstudio-interface" class="section level2">
<h2>The RStudio interface</h2>
<p><em>RStudio</em> is an integrated development environment (IDE) for R. Think of <em>RStudio</em> as a front that allows us to interact, compile, and render R code in a more instinctive way. The following image shows what the standard RStudio interface looks like:</p>
<div class="figure">
<img src="pics/R-Studio.png" alt="" />
<p class="caption">RStudio Interface</p>
</div>
<ol style="list-style-type: decimal">
<li><p><strong>Console</strong>: The <em>console</em> provides a means to interact directly with <em>R</em>. You can type some code at the <em>console</em> and when you press ENTER, R will run that code. Depending on what you type, you may see some output in the <em>console</em> or if you make a mistake, you may get a warning or an error message.</p></li>
<li><p><strong>Script editor</strong>: You will utilize the <em>script editor</em> to complete your assignments. The <em>script editor</em> will be the space where files will be displayed. For example, once you download and open the bi-weekly assignment .Rmd template, it will appear here. The editor is a where you should place code you care about, since the code from the console cannot be saved into a script.</p></li>
<li><p><strong>Environment</strong>: This area holds the abstractions you have created with your code. If you run <code>myresult &lt;- 5+3+2</code>, the <code>myresult</code> object will appear there.</p></li>
<li><p><strong>Plots and files</strong>: This area will be where graphic output will be generated. Additionally, if you write a question mark before any function, (i.e. <code>?mean</code>) the online documentation will be displayed here.</p></li>
</ol>
<hr />
</div>
<div id="getting-help" class="section level2">
<h2>Getting Help 🔎</h2>
<p>The key to learning <code>R</code> is: <strong>Google</strong>! We can give you an overview over basic <code>R</code> functions, but to really learn <code>R</code> you will have to actively use it yourself, trouble shoot, ask questions, and google! Help pages such as <a href="http://stackoverflow.com" class="uri">http://stackoverflow.com</a> offer a rich archive of questions and answers by the <code>R</code> community. For example, if you google “recode data in r” you will find a variety of useful websites explaining how to do this on the first page of the search results. Also, don’t be surprised if you find a variety of different ways to execute the same task.</p>
<p>RStudio also has a useful help menu. In addition, you can get information on any function or integrated data set in <code>R</code> through the console, for example:</p>
<pre><code>?plot</code></pre>
<p>In addition, there are a lot of free <code>R</code> comprehensive guides, such as Quick-R at <a href="http://www.statmethods.net" class="uri">http://www.statmethods.net</a> or the <code>R</code> cookbook at <a href="http://www.cookbook-r.com" class="uri">http://www.cookbook-r.com</a>.</p>
</div>
<div id="executing-a-line-of-code" class="section level2">
<h2>Executing a line of code</h2>
<p>To execute a single line of code. In RStudio, with the curser in the line you want <code>R</code> to execute,</p>
<p>Press <code>command + return</code> (on macOS) or <code>Crtl + Enter</code> (on Windows).</p>
<p>To execute multiple lines of code at once, highlight the respective portion of the code and then run it using the operations above.</p>
</div>
<div id="arithmetic-in-r" class="section level2">
<h2>Arithmetic in <code>R</code> 👨‍🏫</h2>
<p>You can use <code>R</code> as a calculator!</p>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">Operator</th>
<th align="left">Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Addition</td>
<td align="left"><code>+</code></td>
<td align="left"><code>2+4</code></td>
</tr>
<tr class="even">
<td align="left">Subtraction</td>
<td align="left"><code>-</code></td>
<td align="left"><code>2-4</code></td>
</tr>
<tr class="odd">
<td align="left">Multiplication</td>
<td align="left"><code>*</code></td>
<td align="left"><code>2*4</code></td>
</tr>
<tr class="even">
<td align="left">Division</td>
<td align="left"><code>/</code></td>
<td align="left"><code>4/2</code></td>
</tr>
<tr class="odd">
<td align="left">Exponentiation</td>
<td align="left"><code>^</code></td>
<td align="left"><code>2^4</code></td>
</tr>
<tr class="even">
<td align="left">Square Root</td>
<td align="left"><code>sqrt()</code></td>
<td align="left"><code>sqrt(144)</code></td>
</tr>
<tr class="odd">
<td align="left">Absolute Value</td>
<td align="left"><code>abs()</code></td>
<td align="left"><code>abs(-4)</code></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span><span class="sc">*</span><span class="dv">9</span></span></code></pre></div>
<pre><code>## [1] 36</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">144</span>)</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
</div>
<div id="logical-operators" class="section level2">
<h2>Logical operators 🤔</h2>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">Operator</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Less than</td>
<td align="left"><code>&lt;</code></td>
</tr>
<tr class="even">
<td align="left">Less than or equal to</td>
<td align="left"><code>&lt;=</code></td>
</tr>
<tr class="odd">
<td align="left">Greater than</td>
<td align="left"><code>&gt;</code></td>
</tr>
<tr class="even">
<td align="left">Greater than or equal to</td>
<td align="left"><code>&gt;=</code></td>
</tr>
<tr class="odd">
<td align="left">Exactly equal to</td>
<td align="left"><code>==</code></td>
</tr>
<tr class="even">
<td align="left">Not equal to</td>
<td align="left"><code>!=</code></td>
</tr>
<tr class="odd">
<td align="left">Not <code>x</code></td>
<td align="left"><code>!x</code></td>
</tr>
<tr class="even">
<td align="left"><code>x</code> or <code>y</code></td>
<td align="left"><code>x | y</code></td>
</tr>
<tr class="odd">
<td align="left"><code>x</code> and <code>y</code></td>
<td align="left"><code>x &amp; y</code></td>
</tr>
</tbody>
</table>
<p>Logical operators are incredibly helpful for any type of exploratory analysis, data cleaning and/or visualization task.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="sc">&gt;</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="sc">&lt;=</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</div>
</div>
<div id="objects-in-r" class="section level1">
<h1>Objects in R</h1>
<p><code>R</code> stores information as an <em>object</em>. You can name objects whatever you like. Just remember to not use names that are reserved for build-in functions or functions in the packages you use, such as <code>sum</code>, <code>mean</code>, or <code>abs</code>. Most of the time, <code>R</code> will let you use these as names, but it leads to confusion in your code.</p>
<div id="assigning-values-to-objects" class="section level2">
<h2>Assigning values to objects</h2>
<p>A few things to remember</p>
<ul>
<li>Do not use special characters such as <code>$</code> or <code>%</code>. Common symbols that are used in variable names include <code>.</code> or <code>_</code>.</li>
<li>Remember that <code>R</code> is case sensitive.</li>
<li>To assign values to objects, we use the assignment operator <code>&lt;-</code>. Sometimes you will also see <code>=</code> as the assignment operator. This is a matter of preference and subject to debate among <code>R</code> programmers. Personally, I use <code>&lt;-</code> to assign values to objects and <code>=</code> within functions.</li>
<li>The <code>#</code> symbol is used for commenting and demarcation. Any code following <code>#</code> will not be executed.</li>
</ul>
<p>Below, <code>R</code> stores the result of the calculation in an object named <code>result</code>. We can access the value by referring to the object name.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="dv">5</span><span class="sc">/</span><span class="dv">3</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>result</span></code></pre></div>
<pre><code>## [1] 1.666667</code></pre>
<p>If we assign a different value to the object, the value of the object will be changed.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="dv">5-3</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>result</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
</div>
<div id="data-types-in-r" class="section level2">
<h2>Data Types in R</h2>
<p>There are four main variable types you should be familiar with:</p>
<ul>
<li><strong>Numerical</strong>: Any number. <strong>Integer</strong> is a numerical variable without any decimals.</li>
<li><strong>Character</strong>: This is what Stata (and other programming languages such as Python) calls a string. We typically store any alphanumeric data that is not ordered as a character vector.</li>
<li><strong>Logical</strong>: A collection of <code>TRUE</code> and <code>FALSE</code> values.</li>
<li><strong>Factor</strong>: Think about it as an ordinal variable, i.e. an ordered categorical variable.</li>
</ul>
</div>
<div id="data-structures-in-r" class="section level2">
<h2>Data Structures in R</h2>
<p>R has many data structures, the most important ones for now are:</p>
<ul>
<li><strong>Vectors</strong></li>
<li><strong>Lists</strong></li>
<li><strong>Matrices</strong></li>
<li><strong>Data frames</strong></li>
<li><strong>Factors</strong></li>
</ul>
<p>Here is a short overview with a few related operations that you can apply to the different structures.</p>
<div id="vectors" class="section level3">
<h3>Vectors</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>my_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>my_character_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Welcome&quot;</span>, <span class="st">&quot;everyone&quot;</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(my_vector)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(my_character_vector)</span></code></pre></div>
<pre><code>##  chr [1:2] &quot;Welcome&quot; &quot;everyone&quot;</code></pre>
</div>
<div id="matrices" class="section level3">
<h3>Matrices</h3>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>my_matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">nrow=</span><span class="dv">3</span>, <span class="at">ncol=</span><span class="dv">3</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(my_matrix)</span></code></pre></div>
<pre><code>## [1] 3 3</code></pre>
</div>
<div id="lists" class="section level3">
<h3>Lists</h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>my_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="st">&quot;a&quot;</span>, <span class="cn">TRUE</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>my_list[<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;a&quot;</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>my_list[[<span class="dv">2</span>]]</span></code></pre></div>
<pre><code>## [1] &quot;a&quot;</code></pre>
</div>
<div id="data-frames" class="section level3">
<h3>Data Frames</h3>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>my_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>], <span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">y =</span> <span class="dv">11</span><span class="sc">:</span><span class="dv">20</span>)</span></code></pre></div>
<p>Some useful operations to learn something about a data frame - more on this in a moment!</p>
<pre><code>head(my_df)
tail(my_df)
dim(my_df)
nrow(my_df)
ncol(my_df)
str(my_df)
names(my_df)</code></pre>
</div>
<div id="factors" class="section level3">
<h3>Factors</h3>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># direct creation of factors</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>my_factor <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;single&quot;</span>,<span class="st">&quot;single&quot;</span>,<span class="st">&quot;married&quot;</span>,<span class="st">&quot;married&quot;</span>,<span class="st">&quot;single&quot;</span>))</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># turning vectors into factors</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>my_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;single&quot;</span>,<span class="st">&quot;single&quot;</span>,<span class="st">&quot;married&quot;</span>,<span class="st">&quot;married&quot;</span>,<span class="st">&quot;single&quot;</span>)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>my_factor <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(my_vector)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(my_factor)</span></code></pre></div>
<pre><code>## [1] &quot;married&quot; &quot;single&quot;</code></pre>
<p>If you are thrilled by object classes in R by now, <a href="https://swcarpentry.github.io/r-novice-inflammation/13-supp-data-structures/">here is more</a>.</p>
<hr />
</div>
</div>
</div>
<div id="vectors-1" class="section level1">
<h1>Vectors ⬇️</h1>
<p>Let’s first focus on vectors as building blocks of most data structures you’ll be working with.</p>
<p>A <strong>vector</strong> is one of the simplest type of data you can work with in <code>R</code>. “A vector or a one-dimensional array simply represents a collection of information stored in a specific order” (Imai 2017: 14). It is essentially a list of data of a single type (e.g. numerical, character, or logical).</p>
<p>To create a vector, we use the function <code>c()</code> (concatenate) to combine separate data points. The general format for creating a vector in R is as follows: <code>name_of_vector &lt;- c("what you want to put into the vector")</code></p>
<p>Suppose, we have data on the population in millions for the five most populous countries in 2016. The data come from the World Bank.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>pop1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1379</span>, <span class="dv">1324</span>, <span class="dv">323</span>, <span class="dv">261</span>, <span class="dv">208</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>pop1</span></code></pre></div>
<pre><code>## [1] 1379 1324  323  261  208</code></pre>
<p>We can use the function <code>c()</code> to combine two vectors. Suppose we had data on 5 additional countries.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>pop2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">194</span>, <span class="dv">187</span>, <span class="dv">161</span>, <span class="dv">142</span>, <span class="dv">127</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>pop <span class="ot">&lt;-</span> <span class="fu">c</span>(pop1, pop2)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>pop</span></code></pre></div>
<pre><code>##  [1] 1379 1324  323  261  208  194  187  161  142  127</code></pre>
<p>First, lets check which variable type our population data were stored in. The output below tells us that the object <code>pop</code> is of class <em>numeric</em>, and has the dimensions <code>[1:10]</code>, that is 10 elements in one dimension.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(pop)</span></code></pre></div>
<pre><code>##  num [1:10] 1379 1324 323 261 208 ...</code></pre>
<p>Suppose, we wanted to add information on the country names. We can enter these data in <em>character</em> format. To save time, we will only do this for the five most populous countries.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>cname <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;CHN&quot;</span>, <span class="st">&quot;IND&quot;</span>, <span class="st">&quot;USA&quot;</span>, <span class="st">&quot;IDN&quot;</span>, <span class="st">&quot;BRA&quot;</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(cname)</span></code></pre></div>
<pre><code>##  chr [1:5] &quot;CHN&quot; &quot;IND&quot; &quot;USA&quot; &quot;IDN&quot; &quot;BRA&quot;</code></pre>
<p>Now, lets code a <em>logical</em> variable that shows whether the country is in Asia or not. Note that <code>R</code> recognizes both <code>TRUE</code> and <code>T</code> (and <code>FALSE</code> and <code>F</code>) as logical values.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>asia <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, F, T, F)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(asia)</span></code></pre></div>
<pre><code>##  logi [1:5] TRUE TRUE FALSE TRUE FALSE</code></pre>
<p>Lastly, we define a factor variable for the regime type of a country in 2016. This variable can take on one of four values (based on data from the Economist Intelligence Unit): Full Democracy, Flawed Democracy, Hybrid Regimes, and Autocracy. Note that empirically, we don’t have a “hybrid category” here. We could define an empty factor level, but we will skip this step here.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>regime <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Autocracy&quot;</span>, <span class="st">&quot;FlawedDem&quot;</span>, <span class="st">&quot;FullDem&quot;</span>, <span class="st">&quot;FlawedDem&quot;</span>, <span class="st">&quot;FlawedDem&quot;</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>regime <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(regime)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(regime)</span></code></pre></div>
<pre><code>##  Factor w/ 3 levels &quot;Autocracy&quot;,&quot;FlawedDem&quot;,..: 1 2 3 2 2</code></pre>
<p>Data types are important! <code>R</code> will not perform certain operations if you don’t get the variable type right. The good news is that we can switch between data types. This can sometimes be tricky, especially when you are switching from a factor to a numerical type.</p>
<p>Sometimes you have to do a work around, like switching to a character first, and then converting the character to numeric. You can concatenate commands: <code>myvar &lt;- as.numeric(as.character(myvar))</code>.</p>
<p>We won’t go into this too much here; just remember: Google is your friend!</p>
<p>Let’s convert the factor variable <code>regime</code> into a character. Also, for practice, lets convert the <code>asia</code> variable to character and back to logical.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>regime <span class="ot">&lt;-</span> <span class="fu">as.character</span>(regime)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(regime)</span></code></pre></div>
<pre><code>##  chr [1:5] &quot;Autocracy&quot; &quot;FlawedDem&quot; &quot;FullDem&quot; &quot;FlawedDem&quot; &quot;FlawedDem&quot;</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>asia <span class="ot">&lt;-</span> <span class="fu">as.character</span>(asia)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(asia)</span></code></pre></div>
<pre><code>##  chr [1:5] &quot;TRUE&quot; &quot;TRUE&quot; &quot;FALSE&quot; &quot;TRUE&quot; &quot;FALSE&quot;</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>asia <span class="ot">&lt;-</span> <span class="fu">as.logical</span>(asia)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(asia)</span></code></pre></div>
<pre><code>##  logi [1:5] TRUE TRUE FALSE TRUE FALSE</code></pre>
<p><strong>Exercise 1</strong>: Why won’t <code>R</code> let us do the following?</p>
<p><code>no_good &lt;- (a,b,c)</code></p>
<p><code>no_good_either &lt;- c(one, two, three)</code></p>
<p><strong>Exercise 2</strong>: What’s the difference? (Bonus: What do you think is the class of the output vector?)</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>diff <span class="ot">&lt;-</span><span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="st">&quot;TRUE&quot;</span>)</span></code></pre></div>
<p><strong>Exercise 3</strong>: What is the class of the following vector?</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;3&quot;</span>)</span></code></pre></div>
<div id="vector-operations" class="section level3">
<h3>Vector operations</h3>
<p>You can do a variety of things like have <code>R</code> print out particular values or ranges of values in a vector, replace values, add additional values, etc. We will not get into all of these operations today, but be aware that (for all practical purposes) if you can think of a vector manipulation operation, <code>R</code> can probably do it.</p>
<p>We can do arithmatic operations on vectors! Let’s use the vector of population counts we created earlier and double it.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>pop1</span></code></pre></div>
<pre><code>## [1] 1379 1324  323  261  208</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>pop1_double <span class="ot">&lt;-</span> pop1 <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>pop1_double</span></code></pre></div>
<pre><code>## [1] 2758 2648  646  522  416</code></pre>
<p><strong>Exercise 4</strong>: What do you think this will do?</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>pop1 <span class="sc">+</span> pop2</span></code></pre></div>
<p><strong>Exercise 5</strong>: And this?</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>pop_c <span class="ot">&lt;-</span> <span class="fu">c</span>(pop1, pop2)</span></code></pre></div>
</div>
<div id="functions" class="section level3">
<h3>Functions</h3>
<p>There are a number of special functions that operate on vectors and allow us to compute measures of location and dispersion of our data.</p>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">Function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>min()</code></td>
<td align="left">Returns the minimum of the values or object.</td>
</tr>
<tr class="even">
<td align="left"><code>max()</code></td>
<td align="left">Returns the maximum of the values or object.</td>
</tr>
<tr class="odd">
<td align="left"><code>sum()</code></td>
<td align="left">Returns the sum of the values or object.</td>
</tr>
<tr class="even">
<td align="left"><code>length()</code></td>
<td align="left">Returns the length of the values or object.</td>
</tr>
<tr class="odd">
<td align="left"><code>mean()</code></td>
<td align="left">Returns the average of the values or object.</td>
</tr>
<tr class="even">
<td align="left"><code>median()</code></td>
<td align="left">Returns the median of the values or object.</td>
</tr>
<tr class="odd">
<td align="left"><code>var()</code></td>
<td align="left">Returns the variance of the values or object.</td>
</tr>
<tr class="even">
<td align="left"><code>sd()</code></td>
<td align="left">Returns the variance of the values or object.</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(pop)</span></code></pre></div>
<pre><code>## [1] 127</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(pop)</span></code></pre></div>
<pre><code>## [1] 1379</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(pop)</span></code></pre></div>
<pre><code>## [1] 430.6</code></pre>
<p><strong>Exercise 6</strong>: Using functions in <code>R</code>, how else could we compute the mean population value?</p>
<pre><code>## [1] 430.6</code></pre>
</div>
<div id="accessing-elements-of-vectors---indexing" class="section level3">
<h3>Accessing elements of vectors - Indexing</h3>
<p>There are many ways to access elements that are stored in an object. Here, we will focus on a method called <em>indexing</em>, using square brackets as an operator.</p>
<p>Below, we use square brackets and the index <code>1</code> to access the first element of the top 5 population vector and the corresponding country name vector.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>pop1[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] 1379</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>cname[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] &quot;CHN&quot;</code></pre>
<p>We can use indexing to access multiple elements of a vector. For example, below we use indexing to implicitly print the second and fifth elements of the population and the country name vectors, respectively.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>pop[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>)]</span></code></pre></div>
<pre><code>## [1] 1324  208</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>cname[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;IND&quot; &quot;BRA&quot;</code></pre>
<p>We can assign the first element of the population vector to a new object called <code>first</code>.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>first <span class="ot">&lt;-</span> pop[<span class="dv">1</span>]</span></code></pre></div>
<p>Below, we make a copy of the country name vector and delete the <em>last</em> element. Note, that we can use the <code>length()</code> function to achieve the highest level of <em>generalizability</em> in our code. Using <code>length()</code>, we do not need to know the index of the last element of out vector to drop the last element.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>cname_copy <span class="ot">&lt;-</span> cname</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Option 1: Dropping the 5th element</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>cname_copy[<span class="sc">-</span><span class="dv">5</span>]</span></code></pre></div>
<pre><code>## [1] &quot;CHN&quot; &quot;IND&quot; &quot;USA&quot; &quot;IDN&quot;</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Option 2 (for generalizability): Getting the last element and dropping it.</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(cname_copy)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>cname_copy[<span class="sc">-</span><span class="fu">length</span>(cname_copy)]</span></code></pre></div>
<pre><code>## [1] &quot;CHN&quot; &quot;IND&quot; &quot;USA&quot; &quot;IDN&quot;</code></pre>
<p>Indexing can be used to alter values in a vector. Suppose, we notice that we wrongly entered the second element of the regime type vector (or the regime type changed).</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>regime</span></code></pre></div>
<pre><code>## [1] &quot;Autocracy&quot; &quot;FlawedDem&quot; &quot;FullDem&quot;   &quot;FlawedDem&quot; &quot;FlawedDem&quot;</code></pre>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>regime[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="st">&quot;FullDem&quot;</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>regime</span></code></pre></div>
<pre><code>## [1] &quot;Autocracy&quot; &quot;FullDem&quot;   &quot;FullDem&quot;   &quot;FlawedDem&quot; &quot;FlawedDem&quot;</code></pre>
<p><strong>Exercise 7</strong>: We made even more mistakes when entering the data! We want to subtract 10 from the third and fifth element of the top 5 population vector. <em>How would you do it</em>?</p>
</div>
<div id="more-functions" class="section level3">
<h3>More functions</h3>
<p>The myriad of functions that are either built-in to base <code>R</code> or parts of user-written packages are the greatest stength of <code>R</code>. For most applications we encounter in our daily programming practice, <code>R</code> already has a function, or someone smart wrote one. Below, we introduce a few additional helpful functions from base <code>R</code>.</p>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">Function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>seq()</code></td>
<td align="left">Returns sequence from input1 to input2 by input3.</td>
</tr>
<tr class="even">
<td align="left"><code>rep()</code></td>
<td align="left">Repeats input1 input2 number of times.</td>
</tr>
<tr class="odd">
<td align="left"><code>names()</code></td>
<td align="left">Returns the names (labels) of objects.</td>
</tr>
<tr class="even">
<td align="left"><code>which()</code></td>
<td align="left">Returns the index of objects.</td>
</tr>
</tbody>
</table>
<p>Let’s create a vector of indices for our top 5 population data.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>cindex <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="fu">length</span>(pop1), <span class="at">by =</span> <span class="dv">1</span>)</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>cindex</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<p>Suppose we wanted to only print a sequence of even numbers between 2 and 10. We can do so by adjusting the <code>by</code> operator.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">2</span>, <span class="dv">10</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1]  2  4  6  8 10</code></pre>
<p>We can use the <code>rep()</code> function to repeat data.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">30</span>, <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 30 30 30 30 30</code></pre>
<p>Suppose, we wanted to record whether we had completed the data collection process for the top 10 most populous countries. First, suppose we completed the process on every second country.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>completed <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;yes&quot;</span>,<span class="st">&quot;no&quot;</span>), <span class="dv">5</span>)</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>completed</span></code></pre></div>
<pre><code>##  [1] &quot;yes&quot; &quot;no&quot;  &quot;yes&quot; &quot;no&quot;  &quot;yes&quot; &quot;no&quot;  &quot;yes&quot; &quot;no&quot;  &quot;yes&quot; &quot;no&quot;</code></pre>
<p>Now suppose that we have completed the data collection process for the first 5 countries, but not the latter 5 countries (we don’t have their names, location, or regime type yet).</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>completed2 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;yes&quot;</span>,<span class="st">&quot;no&quot;</span>), <span class="at">each =</span> <span class="dv">5</span>)</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>completed2</span></code></pre></div>
<pre><code>##  [1] &quot;yes&quot; &quot;yes&quot; &quot;yes&quot; &quot;yes&quot; &quot;yes&quot; &quot;no&quot;  &quot;no&quot;  &quot;no&quot;  &quot;no&quot;  &quot;no&quot;</code></pre>
<p>We can give our data informative labels. Let’s use the country names vector as labels for our top 5 population vector.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(pop1)</span></code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>cname</span></code></pre></div>
<pre><code>## [1] &quot;CHN&quot; &quot;IND&quot; &quot;USA&quot; &quot;IDN&quot; &quot;BRA&quot;</code></pre>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(pop1) <span class="ot">&lt;-</span> cname</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(pop1)</span></code></pre></div>
<pre><code>## [1] &quot;CHN&quot; &quot;IND&quot; &quot;USA&quot; &quot;IDN&quot; &quot;BRA&quot;</code></pre>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>pop1</span></code></pre></div>
<pre><code>##  CHN  IND  USA  IDN  BRA 
## 1379 1324  323  261  208</code></pre>
<p>We can use labels to access data using indexing and logical operators. Suppose, we wanted to access the population count for Brazil in our top 5 population data.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>pop1[<span class="fu">names</span>(pop1) <span class="sc">==</span> <span class="st">&quot;BRA&quot;</span>]</span></code></pre></div>
<pre><code>## BRA 
## 208</code></pre>
<p><strong>Exercise 8</strong> Access all top 5 population ratings that are greater or equal than the mean value of population ratings.</p>
<pre><code>## [1] 699</code></pre>
<pre><code>##  CHN  IND 
## 1379 1324</code></pre>
<p><strong>Exercise 9</strong> Access all top 5 population ratings that are less than the population of the most populous country, but not the US.</p>
<pre><code>##  IND  IDN  BRA 
## 1324  261  208</code></pre>
<hr />
</div>
</div>
<div id="working-with-r" class="section level1">
<h1>Working with R</h1>
<div id="r-packages" class="section level2">
<h2>R Packages 📦</h2>
<p>For the most part, <em>R Packages</em> are collections of code and functions that leverage R programming to expand on the basic functionalities. There are a plethora of packages in <em>R</em> designed to facilitate the completion of tasks, built by the R community. In later parts of this course, you will also learn how to write packages yourself.</p>
<p>Unlike other programming languages, in <em>R</em> you only need to install a package once. The following times you will only need to load the package. <strong>As a good practice I recommend running the code to install packages only in your R console, not in the code editor.</strong> You can install a package with the following syntax</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;name_of_your_package&quot;</span>) <span class="co">#note that the quotation marks are mandatory at this stage</span></span></code></pre></div>
<p>Once the package has been installed, you just need to “call it” every time you want to use it in a file by running:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;name_of_your_package&quot;</span>) <span class="co">#either of this lines will require the package</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(name_of_your_package) <span class="co">#library understands the code with, or without, quotation marks</span></span></code></pre></div>
<p><strong>It is extremely important that you do not have any lines installing packages for your assignments because the file will fail to knit</strong></p>
<hr />
</div>
<div id="working-directory" class="section level2">
<h2>Working directory 🏠</h2>
<p>The <em>working directory</em> is just a file path on your computer that sets the default location of any files you read into R, or save out of R. Normally, when you open <em>RStudio</em> it will have a default directory (a folder in your computer). You can check you directory by running <code>getwd()</code> in your console:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co">#this is the default in my case</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="co">#[1] &quot;/Users/l.oswald&quot;</span></span></code></pre></div>
<p><strong>When your RStudio is closed and you open a file from your finder in MacOS or file explorer in Windows, the default working directory will be the folder where the file is hosted</strong></p>
<hr />
<div id="setting-your-working-directory" class="section level3">
<h3>Setting your working directory</h3>
<p>You can set you directory manually from RStudio: use the menu to change your working directory under Session &gt; Set Working Directory &gt; Choose Directory.</p>
<p>You can also use the <code>setwd()</code> function:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;/path/to/your/directory&quot;</span>) <span class="co">#in macOS</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;c:/path/to/your/directory&quot;</span>) <span class="co">#in windows</span></span></code></pre></div>
<p>However, you should keep in mind that writing out your whole directory path when setting your working directory is NOT a generalizable solution. When others open your R-Script, they won’t be able to run it on their machine without manually changing the path. This is bad practice. But there is a better option:</p>
<hr />
</div>
<div id="working-with-r-projects" class="section level3">
<h3>Working with R Projects</h3>
<p>Another option that allows you to circumvent the folder structure mess to some degree are R Projects.</p>
<p>They allow you to keep all the files associated with a project together — input data, R scripts, analytical results, figures etc. When you open a Project you will find a .Rproj file. This file contains all the meta information relevant to your project: settings, working directory, open scripts, encoding etc. If you are curious what exactly lies within it.</p>
<hr />
<p>Time for more <em>examples</em>!</p>
<p>Below, we will use use the <code>foreign</code> package to import a .csv file. To make the <code>foreign</code> package available for use, install it and then use the <code>library()</code> command to load it. While packages need to be installed only once, the <code>library()</code> command needs to be run every time you want to use a particular package. On many machines, the <code>foreign</code> package is pre-installed. We install it above for practice purposes.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;foreign&quot;) #alternatively use &quot;Install&quot; button </span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(foreign)</span></code></pre></div>
<p>In this example, we will use a subset of data from the <a href="https://www.acleddata.com/">Armed Conflict Location &amp; Event Data Project (ACLED)</a>, which offers real-time data and analysis on political violence and protests around the world. The <code>ACLED_countries.csv</code> dataset includes the count of riot and protest events from January 2000 to December 2019 for many countries.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
</div>
</div>
<div id="importing-data" class="section level2">
<h2>Importing data</h2>
<p>Most data formats we commonly use are not native to <code>R</code> and need to be imported. Luckily, there is a variety of packages available to import just about any non-native format. One of the essential libraries is called <code>foreign</code> and includes functions to import .csv, .dta (Stata), .dat, ,.sav (SPSS), etc.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/ACLED_countries.csv&quot;</span>,</span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">stringsAsFactors =</span> F)</span></code></pre></div>
</div>
</div>
<div id="data-frames-1" class="section level1">
<h1>Data Frames ⬇️➡️</h1>
<p>Let’s now go a bit deeper with data frames, a structure you’ll probably encounter every time you work with <code>R</code>.</p>
<p>Let’s find out what these data look like. First, use the <code>str()</code> function to explore the variable names and which data class they are stored in. Note: <code>int</code> stands for <code>integer</code> and is a special case of the class <code>numeric</code>.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mydata)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    103 obs. of  5 variables:
##  $ country                : chr  &quot;Afghanistan&quot; &quot;Albania&quot; &quot;Algeria&quot; &quot;Angola&quot; ...
##  $ region                 : chr  &quot;Southern Asia&quot; &quot;Europe&quot; &quot;Northern Africa&quot; &quot;Middle Africa&quot; ...
##  $ nconflicts             : int  40765 582 7362 1108 3118 12627 1861 16802 293 215 ...
##  $ nconflict_no_fatalities: int  23946 581 5321 728 3110 12578 1846 13114 293 165 ...
##  $ fatalities             : int  119973 1 8451 13788 8 59 22 4640 0 114 ...</code></pre>
<p>If we are only interested in what the variables are called, we can use the <code>names()</code> function.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mydata)</span></code></pre></div>
<pre><code>## [1] &quot;country&quot;                 &quot;region&quot;                 
## [3] &quot;nconflicts&quot;              &quot;nconflict_no_fatalities&quot;
## [5] &quot;fatalities&quot;</code></pre>
<p>We can alter the names of vectors by using the <code>names()</code> function and indexing. Because data frames are essentially just combinations of vectors, we can do the same for variable names inside data frames. Suppose we want to change the variable <code>nconflicts</code>.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mydata)[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">&quot;nconflict&quot;</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mydata)</span></code></pre></div>
<pre><code>## [1] &quot;country&quot;                 &quot;region&quot;                 
## [3] &quot;nconflict&quot;               &quot;nconflict_no_fatalities&quot;
## [5] &quot;fatalities&quot;</code></pre>
<p>We can use the <code>summary()</code> function to get a first look at the data.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mydata)</span></code></pre></div>
<pre><code>##    country             region            nconflict      
##  Length:103         Length:103         Min.   :    1.0  
##  Class :character   Class :character   1st Qu.:  315.5  
##  Mode  :character   Mode  :character   Median : 1250.0  
##                                        Mean   : 6216.3  
##                                        3rd Qu.: 5993.5  
##                                        Max.   :70734.0  
##  nconflict_no_fatalities   fatalities      
##  Min.   :    1           Min.   :     0.0  
##  1st Qu.:  289           1st Qu.:    17.5  
##  Median : 1037           Median :   236.0  
##  Mean   : 4667           Mean   :  9543.3  
##  3rd Qu.: 4536           3rd Qu.:  7020.0  
##  Max.   :63665           Max.   :119973.0</code></pre>
<p>A data frame has two dimensions: rows and columns.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(mydata) <span class="co"># Number of rows</span></span></code></pre></div>
<pre><code>## [1] 103</code></pre>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(mydata) <span class="co"># Number of columns</span></span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(mydata) <span class="co"># Rows first then columns.</span></span></code></pre></div>
<pre><code>## [1] 103   5</code></pre>
<div id="accessing-elements-of-a-data-frame---indexing-2" class="section level3">
<h3>Accessing elements of a data frame - Indexing 2</h3>
<p>As a rule, whenever we use two-dimensional indexing in <code>R</code>, the order is: <code>[row, column]</code>. To access the first row of the data frame, we specify the row we want to see and leave the column slot following the comma empty.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>mydata[<span class="dv">1</span>, ]</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["region"],"name":[2],"type":["chr"],"align":["left"]},{"label":["nconflict"],"name":[3],"type":["int"],"align":["right"]},{"label":["nconflict_no_fatalities"],"name":[4],"type":["int"],"align":["right"]},{"label":["fatalities"],"name":[5],"type":["int"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"Southern Asia","3":"40765","4":"23946","5":"119973","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>We can use the concatenate function <code>c()</code> to access multiple rows (or columns) at once. Below we print out the first and second row of the dataframe.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>mydata[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), ]</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["region"],"name":[2],"type":["chr"],"align":["left"]},{"label":["nconflict"],"name":[3],"type":["int"],"align":["right"]},{"label":["nconflict_no_fatalities"],"name":[4],"type":["int"],"align":["right"]},{"label":["fatalities"],"name":[5],"type":["int"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"Southern Asia","3":"40765","4":"23946","5":"119973","_rn_":"1"},{"1":"Albania","2":"Europe","3":"582","4":"581","5":"1","_rn_":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>We can also access a range of rows by separating the minimum and maximum value with a <code>:</code>. Below we print out the first five rows of the dataframe.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>mydata[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["region"],"name":[2],"type":["chr"],"align":["left"]},{"label":["nconflict"],"name":[3],"type":["int"],"align":["right"]},{"label":["nconflict_no_fatalities"],"name":[4],"type":["int"],"align":["right"]},{"label":["fatalities"],"name":[5],"type":["int"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"Southern Asia","3":"40765","4":"23946","5":"119973","_rn_":"1"},{"1":"Albania","2":"Europe","3":"582","4":"581","5":"1","_rn_":"2"},{"1":"Algeria","2":"Northern Africa","3":"7362","4":"5321","5":"8451","_rn_":"3"},{"1":"Angola","2":"Middle Africa","3":"1108","4":"728","5":"13788","_rn_":"4"},{"1":"Armenia","2":"Caucasus and Central Asia","3":"3118","4":"3110","5":"8","_rn_":"5"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>If we try to access a data point that is out of bounds, <code>R</code> returns the value <code>NULL</code>.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>mydata[<span class="dv">3</span>,<span class="dv">7</span>]</span></code></pre></div>
<pre><code>## NULL</code></pre>
<p><strong>Exercise 10</strong> Access the element of the dataframe <code>mydata</code> that is stored in row 1, column 1.</p>
<pre><code>## [1] &quot;Afghanistan&quot;</code></pre>
<p><strong>Exercise 11</strong> Access the element of the data frame <code>mydata</code> that is stored in column 3, row 100.</p>
<pre><code>## [1] 503</code></pre>
</div>
<div id="the-operator" class="section level3">
<h3>The <code>$</code> operator</h3>
<p>The <code>$</code> operator in <code>R</code> is used to specify a variable within a data frame. This is an alternative to indexing.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>mydata<span class="sc">$</span>nconflict</span></code></pre></div>
<pre><code>##   [1] 40765   582  7362  1108  3118 12627  1861 16802   293   215   459    52
##  [13]   765  2105  7760  1919  2621  4625   912   411   312 14519   112 10260
##  [25]    50   191   190  5122   215   197  1446   858  1312  1121   151 67561
##  [37]  3371  5708 22354  1580  1838   491   374  6427   289    39   319    41
##  [49]  2956    83  1294  8857  1365   512   384  3193   598   444   213  2177
##  [61]  1250  9070   682  5143   971 15011   275     9 54496  6568  9690     5
##  [73]   243  1134  3734   370  6096   963  1275  1079 29667 11667  6227     2
##  [85]  3855 12528 70734    68   782  7420   321  5756     1 10334    21  4866
##  [97] 30131     4   102   503 45298  1148  5891</code></pre>
</div>
<div id="table-function" class="section level3">
<h3><code>table()</code> function</h3>
<p>The <code>table()</code> function can be used to tabularize one or more variables. For example, lets find out how many observations (i.e. individual countries) we have per region.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(mydata<span class="sc">$</span>region)</span></code></pre></div>
<pre><code>## 
## Caucasus and Central Asia            Eastern Africa                    Europe 
##                         8                        13                        15 
##             Middle Africa               Middle East           Northern Africa 
##                         8                        15                         7 
##        South-Eastern Asia           Southern Africa             Southern Asia 
##                         8                         8                         6 
##            Western Africa 
##                        15</code></pre>
<p>Using logical operations, we can create more complex tabularizations. For example, below, we show how many countries have above average number of conflict events per region.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mydata<span class="sc">$</span>nconflict)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##     1.0   315.5  1250.0  6216.3  5993.5 70734.0</code></pre>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(mydata<span class="sc">$</span>region, mydata<span class="sc">$</span>nconflict <span class="sc">&gt;</span> <span class="fu">mean</span>(mydata<span class="sc">$</span>nconflict))</span></code></pre></div>
<pre><code>##                            
##                             FALSE TRUE
##   Caucasus and Central Asia     7    1
##   Eastern Africa                9    4
##   Europe                       14    1
##   Middle Africa                 7    1
##   Middle East                  10    5
##   Northern Africa               3    4
##   South-Eastern Asia            5    3
##   Southern Africa               7    1
##   Southern Asia                 2    4
##   Western Africa               14    1</code></pre>
<p><strong>Exercise 12</strong>: How would you access all elements of the variable <code>country</code> using indexing rather than the <code>$</code> operator?</p>
<pre><code>## [1] &quot;Afghanistan&quot; &quot;Albania&quot;     &quot;Algeria&quot;     &quot;Angola&quot;      &quot;Armenia&quot;    
## [6] &quot;Azerbaijan&quot;</code></pre>
<pre><code>## [1] &quot;Afghanistan&quot; &quot;Albania&quot;     &quot;Algeria&quot;     &quot;Angola&quot;      &quot;Armenia&quot;    
## [6] &quot;Azerbaijan&quot;</code></pre>
<p><strong>Exercise 13</strong>: How would you find the maximum value for number of events using the <code>$</code> operator?</p>
<pre><code>## [1] 70734</code></pre>
<p><strong>Exercise 14</strong>: Print the country that corresponds to the maximum world population value using the <code>$</code> operator and indexing!</p>
<pre><code>## [1] &quot;Syria&quot;</code></pre>
<p><strong>Exercise 15</strong>: Print out every second element from the variable <code>country</code> using indexing methods and the sequence function <code>seq()</code>.</p>
<pre><code>## [1] &quot;Afghanistan&quot;            &quot;Algeria&quot;                &quot;Armenia&quot;               
## [4] &quot;Bahrain&quot;                &quot;Belarus&quot;                &quot;Bosnia and Herzegovina&quot;</code></pre>
</div>
<div id="nas-in-r" class="section level2">
<h2>NAs in <code>R</code></h2>
<p><code>NA</code> is how <code>R</code> denotes missing values. For certain functions, <code>NA</code>s cause problems.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">3</span>)</span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(vec) <span class="co">#Result is NA!</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(vec) <span class="co">#Result is NA!</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>We can tell <code>R</code> to remove the NA and execute the function on the remainder of the data.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(vec, <span class="at">na.rm =</span> T)</span></code></pre></div>
<pre><code>## [1] 2.5</code></pre>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(vec, <span class="at">na.rm =</span> T)</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
</div>
<div id="adding-observations" class="section level2">
<h2>Adding observations</h2>
<p>First, lets add another observation to the data. Suppose we wanted to add an observation for Germany, which will be a missing value. We can use the same operations we used for vectors to add data. Here, we will use the <code>rbind()</code> function to do so. <code>rbind()</code> stands for “row bind.” Save the output in a new data frame!</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>obs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Germany&quot;</span>, <span class="st">&quot;Europe&quot;</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>)</span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>mydata_new <span class="ot">&lt;-</span> <span class="fu">rbind</span>(mydata, obs)</span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(mydata_new)</span></code></pre></div>
<pre><code>## [1] 104   5</code></pre>
</div>
<div id="adding-variables" class="section level2">
<h2>Adding variables</h2>
<p>We can also create new variables that use information from the existing data. If we know the number of conflict events without fatalities by country, we can calculate the number of conflict events <em>with</em> fatalities to generate the variable <code>nconflict_fatalities</code>. By using the <code>$</code> operator, we can directly assign the new variable to the data frame <code>mydata_new</code>.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>mydata<span class="sc">$</span>nconflict_fatalities <span class="ot">&lt;-</span> mydata<span class="sc">$</span>nconflict <span class="sc">-</span> mydata<span class="sc">$</span>nconflict_no_fatalities</span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mydata, <span class="dv">3</span>) <span class="co">#prints out the first 3 rows of the data frame</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["region"],"name":[2],"type":["chr"],"align":["left"]},{"label":["nconflict"],"name":[3],"type":["int"],"align":["right"]},{"label":["nconflict_no_fatalities"],"name":[4],"type":["int"],"align":["right"]},{"label":["fatalities"],"name":[5],"type":["int"],"align":["right"]},{"label":["nconflict_fatalities"],"name":[6],"type":["int"],"align":["right"]}],"data":[{"1":"Afghanistan","2":"Southern Asia","3":"40765","4":"23946","5":"119973","6":"16819","_rn_":"1"},{"1":"Albania","2":"Europe","3":"582","4":"581","5":"1","6":"1","_rn_":"2"},{"1":"Algeria","2":"Northern Africa","3":"7362","4":"5321","5":"8451","6":"2041","_rn_":"3"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>We could also compute the average number of fatalities per conflict, computed as the sum of fatalities (<code>fatalities</code> variable) divided by the number of conflicts (<code>nconflict</code> variable).</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>mydata<span class="sc">$</span>av_fatalities <span class="ot">&lt;-</span> mydata<span class="sc">$</span>fatalities<span class="sc">/</span>mydata<span class="sc">$</span>nconflict</span></code></pre></div>
</div>
</div>
<div id="working-with-r-ii" class="section level1">
<h1>Working with R II</h1>
<div id="saving-data" class="section level2">
<h2>Saving data 💾</h2>
<p>Suppose we wanted to save this newly created data frame. We have multiple options to do so. If we wanted to save it as a native <code>.RData</code> format, we would run the following command.</p>
<pre><code># Make sure you specified the right working directory!
save(mydata, file = &quot;mydata_new.RData&quot;)</code></pre>
<p>Most of the time, however, we would want to save our data in formats that can be read by other programs as well. <code>.csv</code> is an obvious choice.</p>
<pre><code>write.csv(mydata_new, file = &quot;mydata_new.csv&quot;)</code></pre>
</div>
<div id="dealing-with-errors-in-r" class="section level2">
<h2>Dealing with errors in R ⛔</h2>
<p>Errors in R occur when code is used in a way that it is not intended. For example when you try to add two character strings, you will get the following error:</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;hello&quot;</span> <span class="sc">+</span> <span class="st">&quot;world&quot;</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>Error <span class="cf">in</span> <span class="st">&quot;hello&quot;</span> <span class="sc">+</span> <span class="st">&quot;world&quot;</span><span class="sc">:</span> non<span class="sc">-</span>numeric argument to binary operator</span></code></pre></div>
<p>Normally, when something has gone wrong with your program, <em>R</em> will notify you of an error in the <strong>console</strong>. There are errors that will prevent the code from running, while others will only produce <strong>warning</strong> messages. In the following case, the code will run, but you will notice that the string <strong>“three”</strong> is turned into a NA.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;three&quot;</span>))</span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>Warning<span class="sc">:</span> NAs introduced by coercion</span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="dv">1</span>  <span class="dv">2</span> <span class="cn">NA</span></span></code></pre></div>
<p>Since we will be utilizing widely used packages and functions in the course of the semester, the errors that you may come across in the process of completing your assignments will be common for other R users. Most errors occur because of typos. A Google search of the error message can take you a long way as well. Most of the times the first entry on <strong>stackoverflow.com</strong> will solve the problem.</p>
<hr />
</div>
<div id="the-double-colon-operator" class="section level2">
<h2>The double colon operator ::</h2>
<p>You may have noted in the previous section that the functions were preceded by their package name and two colons, for example: <code>readr::read_rds()</code>. The double colon operator <code>::</code> helps us ensure that we select functions from a particular package. We utilize the operator to explicitly state where the function is coming. This may become even more important when you are doing data analysis as part of a team further in your careers. Though it is likely that this will not be a problem during the course, we can try to employ the following convention <code>package_name::function()</code> to ensure that we will not encounter errors in our knitting process:</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">select</span>()</span></code></pre></div>
<hr />
<p>Let’s look at what happens when we load <code>tidyverse</code>.</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a><span class="co">#── Attaching packages ──────────────────────────────────────────────────────────────────────────── tidyverse 1.3.0 #──</span></span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a><span class="co">#✓ ggplot2 3.3.2     ✓ purrr   0.3.4</span></span>
<span id="cb160-5"><a href="#cb160-5" aria-hidden="true" tabindex="-1"></a><span class="co">#✓ tibble  3.0.3     ✓ dplyr   1.0.2</span></span>
<span id="cb160-6"><a href="#cb160-6" aria-hidden="true" tabindex="-1"></a><span class="co">#✓ tidyr   1.1.2     ✓ stringr 1.4.0</span></span>
<span id="cb160-7"><a href="#cb160-7" aria-hidden="true" tabindex="-1"></a><span class="co">#✓ readr   1.3.1     ✓ forcats 0.5.0</span></span>
<span id="cb160-8"><a href="#cb160-8" aria-hidden="true" tabindex="-1"></a><span class="co">#── Conflicts ─────────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() #──</span></span>
<span id="cb160-9"><a href="#cb160-9" aria-hidden="true" tabindex="-1"></a><span class="co">#x dplyr::filter() masks stats::filter()</span></span>
<span id="cb160-10"><a href="#cb160-10" aria-hidden="true" tabindex="-1"></a><span class="co">#x dplyr::lag()    masks stats::lag()</span></span></code></pre></div>
<p>You may notice that <em>R</em> points out some conflicts where some functions are being masked. The default in this machine will become the <code>filter()</code> from the <code>dplyr</code> package during this session. If you were to run some code that is based on the <code>filter()</code> from the <code>stats</code> package, your code will probably result in errors.</p>
<hr />
</div>
</div>
<div id="best-practices" class="section level1">
<h1>Best practices 🦸</h1>
<p>Let us conclude the tutorial with some notes on best practices in R. There is a multitude of collections on best practices online, for example, some very useful ones are <a href="https://www.r-bloggers.com/2018/09/r-code-best-practices/">here</a>.</p>
<div id="script-structure" class="section level2">
<h2>Script structure</h2>
<p>When structuring your scripts, remember a few things</p>
<ul>
<li>Libraries go first</li>
<li>Hard coded variables (e.g. when reading in data) go second</li>
<li>Relative paths over absolute paths (give your friends and colleagues a chance to execute your scripts without trouble)</li>
</ul>
</div>
<div id="naming-conventions" class="section level2">
<h2>Naming conventions</h2>
<p>In summary, we can say: always use easy to interpret names and don’t use whitespaces in file or variable names! Some <em>good</em> examples:</p>
<ul>
<li>my_file.R</li>
<li>my_vector &lt;- c(1,2,3)</li>
<li>this_function()</li>
</ul>
</div>
<div id="spacing" class="section level2">
<h2>Spacing</h2>
<p>It is somewhat easier to read if you generally leave a space after a comma</p>
<ul>
<li>my_function(1:10, c(2, 4))</li>
</ul>
</div>
<div id="repetition" class="section level2">
<h2>Repetition</h2>
<p>When you start copying and pasting code (creating a lot of redundancy), you might want to consider slimming down your code by creating a function. Functions? Let us leave this as a note of caution and maybe return to functions and efficient code at the very end of our session tomorrow! :-)</p>
</div>
<div id="project-structure" class="section level2">
<h2>Project structure 🗂</h2>
<p>R projects are only as useful as the organization within them. A structure like the following one would be a good starting point.</p>
<pre><code>.
+-- src
+-- output
|   +-- figures
|   +-- tables
+--data
|   +-- raw
|   +-- processed
|
+-- README.md
+-- run_analyses.R 
+-- .gitignore
</code></pre>
<p>The overview can be adapted to requirements inherent to any given project. It might be interesting to spend a little more time looking into the different folders and what they should contains.</p>
<div id="data-folder" class="section level3">
<h3>Data Folder</h3>
<p>The data folder is, as the name suggests, where your data goes. The “raw” folder should contain the original data that will need to be wrangled and manipulated. It might be that your data is stored in an online relational database, or needs to be accessed through an API. In such cases the raw folder can be dispensed with.</p>
<p>Once you have shaped your data into a format that suits your analysis, the data should be stored in the “processed” folder. If you need to perform certain intermediate steps it might also be an idea to create a dedicated “temp” folder.</p>
</div>
<div id="src-folder" class="section level3">
<h3>src folder</h3>
<p>This is the folder that should contain your code. You should aim to emulate the workflow of standard data science project within this folder. It is best to separate different aspects of your project into separate scripts. The names of these scripts should be named so as to make it clear what step of the project they represent (i.e. “2-preprocess-data”, “3-descriptives” etc.). These scripts should sequentially be executed through a main runner script. This can be done calling the <code>source()</code> function.</p>
</div>
<div id="relative-paths" class="section level3">
<h3>relative paths</h3>
<p>Within a given script you should always use relative paths. To access your processed data folder you can use the following file path <code>"./data/processed.RDa"</code>. The “.” represents your current working directory, which is set automatically when you open a new R-project.</p>
</div>
</div>
<div id="actually-learning-r" class="section level2">
<h2>Actually learning R 🎒</h2>
<p>Again, the key to learning <code>R</code> is: <strong>Google</strong>! We can only give you an overview over basic <code>R</code> functions, but to really learn <code>R</code> you will have to actively use it yourself, trouble shoot, ask questions, and google! It is very likely that someone else has had the exact same or just <em>similar enough</em> issue before and that the R community has answered it with 5+ different solutions years ago. 😉</p>
<hr />
</div>
</div>
<div id="sources" class="section level1 unnumbered">
<h1 class="unnumbered">Sources</h1>
<p>This script draws heavily on the materials for the Introduction to R workshop within the Data Science Seminar series at Hertie, created by Therese Anders.</p>
<p>Economist Intelligence Unit (2017): <em>Democracy Index</em>. <a href="https://infographics.economist.com/2017/DemocracyIndex/" class="uri">https://infographics.economist.com/2017/DemocracyIndex/</a>.</p>
<p>Imai, Kosuke (2017): <em>Quantitative Social Science. An Introduction</em>. Princeton and Oxford: Princeton University Press.</p>
<p>Raleigh, Clionadh, Andrew Linke, Håvard Hegre and Joakim Karlsen. 2010. Introducing ACLED – Armed Conflict Location and Event Data. <em>Journal of Peace Research</em> 47(5), 651-660.</p>
<p>World Bank (2017): <em>Population, total</em>. <a href="https://data.worldbank.org/indicator/sp.pop.totl?end=2016&amp;start=2015" class="uri">https://data.worldbank.org/indicator/sp.pop.totl?end=2016&amp;start=2015</a>.</p>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>ACLED uses the following definition: “A protest describes a non-violent, group public demonstration, often against a government institution. Rioting is a violent form of demonstration,” see Raleigh, C. and C. Dowd (2015): Armed Conflict Location and Event Data Project (ACLED) Codebook.)<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2022.5">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000}
    p.p2 {margin: 0.0px 0.0px 6.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000}
    p.p3 {margin: 0.0px 0.0px 12.0px 0.0px; text-align: center; font: 12.0px Menlo; color: #000000; -webkit-text-stroke: #000000}
    p.p4 {margin: 0.0px 0.0px 12.0px 0.0px; text-align: center; font: 12.0px Menlo; color: #5a5a5a; -webkit-text-stroke: #5a5a5a}
    p.p5 {margin: 0.0px 0.0px 12.0px 0.0px; text-align: center; font: 12.0px Menlo; color: #0000e9; -webkit-text-stroke: #0000e3}
    p.p6 {margin: 0.0px 0.0px 12.0px 0.0px; text-align: center; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000}
    span.s1 {font-kerning: none}
    span.s2 {text-decoration: underline ; font-kerning: none}
  </style>
</head>
<body>
<p class="p1"><span class="s1"> </span></p>
<p class="p2"><span class="s1"><br>
</span></p>
<p class="p3"><span class="s1">A work by Lisa Oswald<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><i>Prepared for Statistical Modeling &amp; Causal Inference, taught by Simon Munzert</i></span></p>
<p class="p5"><span class="s2"><a href="https://www.hertie-school.org/en/"><i>Hertie School, Berlin</i></a></span></p>
<p class="p6"><span class="s1"><br>
</span></p>
<p class="p1"><span class="s1"> <span class="Apple-converted-space"> </span></span></p>
</body>
</html>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
